'use strict';

exports.__esModule = true;
exports.getLocaleMessages = getLocaleMessages;
exports.addLocalizationData = addLocalizationData;

var _reactIntl = require('react-intl');

var _en = require('./en');

var _en2 = _interopRequireDefault(_en);

var _de = require('./de');

var _de2 = _interopRequireDefault(_de);

var _en3 = require('react-intl/locale-data/en');

var _en4 = _interopRequireDefault(_en3);

var _de3 = require('react-intl/locale-data/de');

var _de4 = _interopRequireDefault(_de3);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var areIntlLocalesSupported = require('intl-locales-supported');

// START: Intl polyfill
// Required for working on Safari
// Code from here: https://formatjs.io/guides/runtime-environments/
var localesMyAppSupports = [
  /* list locales here */
];

if (global.Intl) {
  // Determine if the built-in `Intl` has the locale data we need.
  if (!areIntlLocalesSupported(localesMyAppSupports)) {
    // `Intl` exists, but it doesn't have the data we need, so load the
    // polyfill and replace the constructors with need with the polyfill's.
    var IntlPolyfill = require('intl');
    Intl.NumberFormat = IntlPolyfill.NumberFormat;
    Intl.DateTimeFormat = IntlPolyfill.DateTimeFormat;
  }
} else {
  // No `Intl`, so use and load the polyfill.
  global.Intl = require('intl');
}
// END: Intl polyfill

var locales = [{
  locale: 'en',
  messages: _en2.default,
  data: _en4.default
}, {
  locale: 'de',
  messages: _de2.default,
  data: _de4.default
}];

function getLocaleMessages(l, ls) {
  if (ls) {
    for (var i = 0; i < ls.length; i++) {
      if (ls[i]['locale'] === l) {
        return ls[i]['messages'];
      }
    }
  }

  return _en2.default; // Default locale
}

function addLocalizationData(ls) {
  ls.map(function (l) {
    (0, _reactIntl.addLocaleData)(l.data);
    return l;
  });
}

exports.default = locales;